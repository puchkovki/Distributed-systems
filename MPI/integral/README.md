# **Определенный интеграл**

## **Задача**

Вычислить определенный интеграл, используя метод трапеции. 

**Входные параметры**:
1. Число разбиений отрезка N.

**Результат**: значение интеграла с точностью до 6 знаков после запятой (тип `double`). 

### **Требования**
1. Распараллелить программу, используя среду MPI (обязательно использовать вызовы `MPI_Send/MPI_Recv`).
2. Построить графики ускорения и эффективности для числа процессов от 1 до 28.

## **Решение**

Отрезок интегрирования делится на интервалы, количество которых равно количеству процессов, запущенных системой. Интервалы не пересекаются, и каждый процесс параллельно считает значение функции на своем интервале. Далее значения передаются с помощью `MPI_Send` 0-ому процессу, который с помощью `MPI_Recv` суммирует все полученные значения, получая значение интеграла.

Файл исходного кода `solution.c` выводит количество процессов, использованных программой, и значение интеграла. Файл исходного кода `graph.c` выводит среднее время работы программы для указанного количества процессов. 

**Важно**: для запуска `graph.c` требуется дополнительный параметр — число последовательных запусков программы для получения усредненного значения времени работы.

## **Запуск**

**Важно**: сборочные скрипты `build_time.sh, build_solution.sh, build_graphics.sh` не запустяться на учебном кластере. Можете попробовать запустить их на вашем ПК/ноутбуке.

```
./build_time.sh число_разбиений_отрезка  количество_выполнений_для_усреднения
```

Либо запустите в своей командной оболочке Unix:
```
mpicc -Wall -Wextra -pedantic -O3 -Wshadow -Wformat=2 -Wfloat-equal -Wconversion -Wcast-qual \
-Wcast-align -D_GLIBCXX_DEBUG -D_GLIBCXX_DEBUG_PEDANTIC -fsanitize=undefined \
-fno-sanitize-recover=all -fstack-protector -o test time.cpp -lm
mpirun -np number_of_processes ./test partition_of_the_grid required_number_of_execution
```

Скрипт для общего кластера смотрите на сайте lms.mipt.ru в вкладке «‎Параллельное программирование»‎. В методичке «‎Учебный кластер»‎ описан процесс постановки задачи в очередь и запуска на учебном кластере.

## **Результат**

Все результаты сохраняются в папке `res`. В файле `data.txt` первой колонкой записано количество процессов, второй — среднее время их выполнения при выборке в 1000 последовательных запусков. 

Для построения графиков запустите скрипт `build_graphics.sh`. Он последовательно скомпилирует файл `data.c`, который на выходе создаст два файла: в `acceleration.txt` второй колонкой записаны ускорения процессов, в `efficiency.txt` — эффективности; и запустит `gnuplot`, который отрисует требуемые графики.